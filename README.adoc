= ClearCloud
:toc: macro
:latest-release: main

image:https://img.shields.io/jenkins/build?jobUrl=https%3A%2F%2Fjenkins.chapp.io%2Fjob%2FTocabi%2Fjob%2Fclearcloud%2Fjob%2Fmain[Jenkins,link="https://jenkins.chapp.io/blue/organizations/jenkins/Tocabi%2Fclearcloud/branches"]
image:https://img.shields.io/github/license/Tocabi/clearcloud[License,link="https://github.com/Tocabi/clearcloud/blob/main/LICENSE"]

A personal file management and sharing application.

toc::[]

== Introduction

ClearCloud is a self-hosted file management system which allows you to access your files from anywhere, without the privacy concerns of a cloud service.

image:docs/screenshot_files.png[ClearCloud file browser]

== Installation

=== Docker

Docker is probably the easiest way to install ClearCloud.

1. https://docs.docker.com/engine/install[Install Docker]
2. Create a `docker-compose.yml` file:
+
[source,yml,subs="attributes"]
----
version: '3.7'

services:
  clearcloud:
    image: tocabi/clearcloud:{latest-release}
    restart: unless-stopped
    ports:
      # Here we expose clearcloud on port 5555
      - 5555:5555
    volumes:
      # We create a volume for you files
      - /path/to/your/media:/libraries
    environment:
      POSTGRES_HOST: database
      POSTGRES_DB: clearcloud
      POSTGRES_USER: clearcloud
      POSTGRES_PASSWORD: "ChangeMeToASecurePassword"
  database:
    image: library/postgres:13
    restart: unless-stopped
    volumes:
      # We need to store the database files somewhere
      - /path/to/your/database/storage:/var/lib/postgresql/data
    environment:
      POSTGRES_DB: clearcloud
      POSTGRES_USER: clearcloud
      POSTGRES_PASSWORD: "ChangeMeToASecurePassword"
----
3. Run `docker compose up -d` to start the stack
4. Open clearcloud on http://localhost:5555 or http://<your-server-ip>:5555

== Development

=== Prerequisites

To set up your development environment you need the following software:

- Docker v20
- Go v1.16
- Node v16
- Yarn v1.22

=== Running Locally

To start the backend:

[source,bash]
----
# Start all dependencies
docker compose up -d

# Optional: download go libs
# This also happens automatically when running other go commands
go get

# Optional: update the api docs
swag init

# Start the backend
go run ./main.go
----

You can now access the API docs at http://localhost:5555/docs/index.html

To start the frontend:

[source,bash]
----
# Open the project folder
cd web

# Install dependencies
yarn

# Start the frontend
yarn start
----

You can now access the application at http://localhost:3000
